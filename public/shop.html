<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="Rebelvids Academy Shop â€” XMLs, Presets, Courses and Bundles for creators">
  <title>Rebelvids Academy - Shop</title>
  <link rel="icon" type="image/png" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg72dLQsTikwIUPO3SUMAILy1otx_2-tYliOzSNiKWQAHvevzOuH6p-fI-Ep9MMvtkbZXnwrAILLDLo9yBVgrIVRHl69BQiMMBSnZjL4w5L2kzZENmwqis6wie594T28-udOmCk6qPH5Qn-zP2fA1D6V8sz4gqdOMFEMUdrI-axhgW7uV0kfhhoqUa8u2S_/s1600/logo.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <header class="topbar fixed">
    <div class="container header-inner">
      <div class="logo-small"><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg72dLQsTikwIUPO3SUMAILy1otx_2-tYliOzSNiKWQAHvevzOuH6p-fI-Ep9MMvtkbZXnwrAILLDLo9yBVgrIVRHl69BQiMMBSnZjL4w5L2kzZENmwqis6wie594T28-udOmCk6qPH5Qn-zP2fA1D6V8sz4gqdOMFEMUdrI-axhgW7uV0kfhhoqUa8u2S_/s1600/logo.png" alt="Rebelvids Academy logo" class="logo-img"></div>
      <div class="nav-capsule">
        <nav class="nav">
          <a href="index.html">Home</a>
          <a href="shop.html">Shop</a>
          <a href="courses.html">Courses</a>
          <a href="bundle.html">Bundles</a>
          <a href="#why-different">Why Us</a>
          <a href="index.html#faq-faq-bottom">FAQs</a>
          <a href="#contact">Contact</a>
        </nav>
      </div>
    <div class="header-cta">
  <a class="schedule-btn" href="index.html#schedule" aria-label="Schedule a Call">ðŸ“ž</a>
  <a class="cta-pill header-auth-opener" href="#">Login/Sign up <span class="cta-arrow">â†’</span></a>
    </div>

      <button class="nav-toggle" aria-expanded="false" aria-label="Open menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>

      <div class="mobile-nav" aria-hidden="true">
        <nav>
          <a href="index.html">Home</a>
          <a href="shop.html">Shop</a>
          <a href="courses.html">Courses</a>
          <a href="bundle.html">Bundles</a>
          <a href="#why-different">Why Us</a>
          <a href="index.html#faq-faq-bottom">FAQs</a>
          <a href="shipping-delivery.html">Shipping & Delivery</a>
          <a href="#contact">Contact</a>
        </nav>
  <div class="mobile-cta"><a class="schedule-btn" href="index.html#schedule" aria-label="Schedule a Call">ðŸ“ž</a><a class="cta-pill header-auth-opener" href="#">Login/Sign up <span class="cta-arrow">â†’</span></a></div>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="container">
      <p class="eyebrow">All Products</p>
      <h1 class="section-title">Shop â€” All Products</h1>

  <div id="shop-all" class="compare-grid"></div>

      <hr style="margin:34px 0;border-color:rgba(255,255,255,0.04)">

  <section id="xml-presets">
        <p class="eyebrow">XML & Presets</p>
        <h2 class="section-title">XMLs & Presets</h2>
  <div id="shop-xml" class="courses-grid"></div>
      </section>

  <section id="courses">
        <p class="eyebrow">Courses</p>
        <h2 class="section-title">Courses</h2>
  <div id="shop-courses" class="courses-grid"></div>
      </section>

  <section id="bundles">
        <p class="eyebrow">Bundles</p>
        <h2 class="section-title">Bundles</h2>
  <div id="shop-bundles" class="courses-grid"></div>
      </section>

    </div>
  </main>

   <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <div class="logo">Rebelvids Academy</div>
        <p class="desc">Whether you're a busy YouTuber or a struggling freelancer, Rebelvids Academy will take you to the next level.</p>
        <div class="socials">
          <a href="https://www.instagram.com/rebelvids_official?igshid=cDV3aWppN3dqdjBw" aria-label="instagram" class="social-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="2" width="20" height="20" rx="5" stroke="#0BA8FF" stroke-width="1.5"/><circle cx="12" cy="12" r="3.5" stroke="#0BA8FF" stroke-width="1.4"/><circle cx="17.2" cy="6.8" r="0.7" fill="#0BA8FF"/></svg>
          </a>
          <a href="https://x.com/Rebelvids_01?t=Wqzh6lJuux4HL2BOJGrjfg&s=09" aria-label="x" class="social-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 7L8.5 16.5" stroke="#0BA8FF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.5 7L18 16.5" stroke="#0BA8FF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </a>
          <a href="https://www.youtube.com/@Rebelvids_01" aria-label="youtube" class="social-icon">
            <svg width="20" height="14" viewBox="0 0 24 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23 2.5C22.8 1.6 22.2 0.9 21.4 0.7 19.7 0.2 12 0.2 12 0.2s-7.7 0-9.4.5C1.8.9 1.2 1.6 1 2.5 0.5 4.2 0.5 8 0.5 8s0 3.8.5 5.5c.2.9.8 1.6 1.6 1.8 1.7.5 9.4.5 9.4.5s7.7 0 9.4-.5c.8-.2 1.4-.9 1.6-1.8.5-1.7.5-5.5.5-5.5s0-3.8-.5-5.5z" stroke="#0BA8FF" stroke-width="0.6" fill="rgba(11,104,168,0.06)"/><path d="M9.5 5.5L15 8l-5.5 2.5V5.5z" fill="#0BA8FF"/></svg>
          </a>
          <a href="https://t.me/officialRebelvids" aria-label="telegram" class="social-icon">
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21 3L3.5 10.2c-.7.3-.6 1.2.1 1.4l4.4 1.3 1.7 5c.2.7 1.1.8 1.5.2l2.4-3.6 4.8 3.3c.6.4 1.4.1 1.6-.6l2.8-13.3c.1-.7-.5-1.2-1.1-1z"
          stroke="#0BA8FF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</a>
<a href="https://whatsapp.com/channel/0029Va8Dk7Q60eBbvwvxHM0t" aria-label="whatsapp" class="social-icon">
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <!-- outer chat bubble -->
    <path d="M20.5 3.5C18.3 1.4 15.3.2 12 .2 5.8.2.8 5.2.8 11.4c0 2 .5 3.9 1.5 5.5L2 22l5.3-1.5c1.5.8 3.2 1.2 4.9 1.2 6.2 0 11.2-5 11.2-11.2 0-3-1.2-5.9-3.4-8z"
          stroke="#0BA8FF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
    <!-- phone handset + message waves inside -->
    <path d="M9.5 8.2c.1-.2.3-.3.5-.2l1.3.6c.2.1.3.3.3.5l-.2 1c-.1.3 0 .6.2.8l1.3 1.3c.2.2.5.3.8.2l1-.2c.2 0 .4.1.5.3l.6 1.3c.1.2 0 .4-.2.5-.6.5-1.3.8-2 .8-1.1 0-2.2-.4-3.3-1.3-1.2-1-2.1-2.3-2.5-3.6-.3-.9-.2-1.8.3-2.5z"
          stroke="#0BA8FF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</a>
        </div>
      </div>

      <div class="footer-cols">
        <div class="col">
          <h5>Solutions</h5>
          <ul><li><a href="#">Home</a></li><li><a href="#">Shop</a></li><li><a href="#">Courses</a></li><li><a href="#">Bundles</a></li></ul>
        </div>
        <div class="col">
          <h5>Company</h5>
          <ul>
            <li><a href="#">Why Us</a></li>
            <li><a href="#">FAQ</a></li>
            <li><a href="shipping-delivery.html">Shipping & Delivery</a></li>
            <li><a href="privacy-policy.html">Privacy Policy</a></li>
            <li><a href="terms-conditions.html">Terms & Conditions</a></li>
            <li><a href="refund-policy.html">Refund & Return Policy</a></li>
            <li><a href="cookies-policy.html">Cookies Policy</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-copy" style="margin-top:18px; width:100%;">
        <p style="color:rgba(255,255,255,0.55);font-size:13px;margin:12px 0 0"> 2025 Rebelvids Academy. All rights reserved.</p>
        <p style="color:rgba(255,255,255,0.55);font-size:13px;margin:12px 0 0"><a href="https://www.instagram.com/___tauqeer.x/">Developed By: Tavqeer Hussain</a></p>
      </div>
    </div>
  </footer>

  <script>
    // copy nav toggle from other pages
    document.addEventListener('DOMContentLoaded', function(){
      const toggle = document.querySelector('.nav-toggle');
      const mobileNav = document.querySelector('.mobile-nav');
      if(!toggle || !mobileNav) return;

      function setOpen(open){
        toggle.classList.toggle('open', open);
        toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        mobileNav.setAttribute('aria-hidden', open ? 'false' : 'true');
      }

      toggle.addEventListener('click', ()=>{ const isOpen = toggle.classList.contains('open'); setOpen(!isOpen); });
      mobileNav.querySelectorAll('a').forEach(a=>a.addEventListener('click', ()=>setOpen(false)));
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') setOpen(false) });
    });
  </script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signInWithRedirect, getRedirectResult, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyA_NjUa3NUIDXmrxlGS246ZqpBRurR6QYw",
      authDomain: "rebelvids-academy.firebaseapp.com",
      databaseURL: "https://rebelvids-academy-default-rtdb.firebaseio.com",
      projectId: "rebelvids-academy",
      storageBucket: "rebelvids-academy.firebasestorage.app",
      messagingSenderId: "428974451833",
      appId: "1:428974451833:web:d2966813296557499e78a8",
      measurementId: "G-NF6GQ225WM"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();
    provider.setCustomParameters({ prompt: 'select_account' });

    function setSession(id){ try{ localStorage.setItem('rva_session', JSON.stringify(id)); window.dispatchEvent(new Event('storage')); }catch(_){} }
    function getUsers(){ try{return JSON.parse(localStorage.getItem('rva_users')||'[]')}catch(e){return[]} }
    function saveUsers(u){ localStorage.setItem('rva_users', JSON.stringify(u)); window.dispatchEvent(new Event('storage')); }
    function upsertUserFromFirebase(user){
      const users = getUsers();
      let name = user.displayName || (user.email ? user.email.split('@')[0] : 'User');
      const email = user.email || '';
      const idx = users.findIndex(u=>u.id===user.uid);
      const payload = { id: user.uid, name, email, loginCount: (users[idx]?.loginCount||0)+1, purchases: users[idx]?.purchases||0 };
      if(idx>=0) users[idx] = { ...users[idx], ...payload }; else users.push(payload);
      saveUsers(users);
    }

    // Handle redirect login results (in case popup is blocked or not supported)
    (async function(){
      try{
        const redirectResult = await getRedirectResult(auth);
        if(redirectResult && redirectResult.user){
          const user = redirectResult.user;
          upsertUserFromFirebase(user);
          setSession(user.uid);
          const modal = document.getElementById('auth-modal');
          if(modal){ modal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
          location.reload();
        }
      }catch(e){
        console.error('Google redirect sign-in failed', e);
      }
    })();

    function attach(btn){ if(!btn) return; btn.addEventListener('click', async ()=>{ try{ const result = await signInWithPopup(auth, provider); const user = result.user; upsertUserFromFirebase(user); setSession(user.uid); const modal = document.getElementById('auth-modal'); if(modal){ modal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; } location.reload(); }catch(e){ console.error('Google sign-in failed', e); const code = e && e.code || ''; if(code === 'auth/popup-blocked' || code === 'auth/operation-not-supported-in-this-environment' || code === 'auth/cancelled-popup-request'){ try{ await signInWithRedirect(auth, provider); }catch(er){ console.error('Fallback to redirect failed', er); alert('Google sign-in failed. Please try again.'); } } else if(code === 'auth/unauthorized-domain'){ alert('Sign-in blocked: unauthorized domain in Firebase Auth settings. Please add this domain in Firebase console.'); } else { alert('Google sign-in failed. Please try again.'); } } }); }
    attach(document.getElementById('google-signin-btn'));
    attach(document.getElementById('google-signin-btn-shadow'));

    onAuthStateChanged(auth, (user)=>{ if(user){ upsertUserFromFirebase(user); setSession(user.uid); } });
  </script>
  <!-- Auth modal: Google Sign-In only -->
  <div id="auth-modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="auth-title">
      <button class="modal-close" aria-label="Close">âœ•</button>
      <h3 id="auth-title">Continue</h3>
      <p class="modal-sub">Sign in with your Google account.</p>
      <div class="modal-form" style="display:flex;flex-direction:column;gap:12px">
        <button id="google-signin-btn" class="primary-btn" type="button" style="display:inline-flex;align-items:center;gap:8px;justify-content:center">
          <span>Continue with Google</span>
        </button>
        <a href="#" class="modal-cancel" style="text-align:center">Cancel</a>
      </div>
    </div>
  </div>
  <!-- Create modal removed/neutralized for Google-only auth -->
  <div id="create-modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="create-title">
      <button class="modal-close" aria-label="Close">âœ•</button>
      <h3 id="create-title">Create Account</h3>
      <p class="modal-sub">Use Google Sign-In to continue.</p>
      <div class="modal-actions" style="display:flex;gap:12px;align-items:center">
        <button id="google-signin-btn-shadow" class="primary-btn" type="button">Continue with Google</button>
        <a href="#" class="modal-cancel">Cancel</a>
      </div>
    </div>
  </div>

  <script>
  (function(){
    const USERS_KEY = 'rva_users';
    const SESSION_KEY = 'rva_session';
    function getUsers(){ try{return JSON.parse(localStorage.getItem(USERS_KEY)||'[]')}catch(e){return[]} }
    function saveUsers(u){ localStorage.setItem(USERS_KEY, JSON.stringify(u)); }
    function getSession(){ try{ return JSON.parse(localStorage.getItem(SESSION_KEY)||'null'); }catch(e){return null} }
    function setSession(id){ localStorage.setItem(SESSION_KEY, JSON.stringify(id)); window.dispatchEvent(new Event('storage')); }
    // validators
    function validateEmail(email){ const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; return re.test(email); }
    function passwordStrength(pw){ let score=0; if(!pw) return {score:0,label:'Empty'}; if(pw.length>=8)score++; if(/[A-Z]/.test(pw) && /[a-z]/.test(pw)) score++; if(/\d/.test(pw)) score++; if(/[^A-Za-z0-9]/.test(pw)) score++; let label='Weak'; if(score>=3) label='Medium'; if(score>=4) label='Strong'; return {score,label}; }
    async function sha256hex(str){ const enc=new TextEncoder(); const data=enc.encode(str); const hash=await crypto.subtle.digest('SHA-256', data); return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,'0')).join(''); }

    const authModal = document.getElementById('auth-modal');
    const createModal = document.getElementById('create-modal');
    const openers = Array.from(document.querySelectorAll('.header-auth-opener'));
    const mobileOpenBtn = document.querySelector('.mobile-nav .header-auth-opener');
    function openAuth(){ if(authModal){ authModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; const gbtn = authModal.querySelector('#google-signin-btn'); if(gbtn) gbtn.focus(); } }
    function closeAuth(){ if(authModal){ authModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; } }
    function openCreate(){ if(createModal){ createModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; createModal.querySelector('#create_name').focus(); } }
    function closeCreate(){ if(createModal){ createModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; } }

  // Desktop and mobile button event listeners
  openers.forEach(o=> o.addEventListener('click', function(e){ try{ if(getSession()) return; }catch{} e.preventDefault(); openAuth(); }));
  
  // Explicit mobile button event listener
  if(mobileOpenBtn) mobileOpenBtn.addEventListener('click', function(e){ try{ if(getSession()) return; }catch{} e.preventDefault(); openAuth(); });
  
  // Delegated listener as fallback
  document.addEventListener('click', function(e){ const a = e.target.closest && e.target.closest('.header-auth-opener'); if(!a) return; try{ if(getSession()) return; }catch(e){} e.preventDefault(); openAuth(); });

    // close handlers
    [authModal, createModal].forEach(m=>{ if(!m) return; const cb=m.querySelector('.modal-close'); if(cb) cb.addEventListener('click', ()=>{ m.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }); m.querySelectorAll('.modal-cancel').forEach(c=> c.addEventListener('click', function(ev){ ev.preventDefault(); m.setAttribute('aria-hidden','true'); document.body.style.overflow=''; })); m.addEventListener('click', function(e){ if(e.target.classList.contains('modal')||e.target.classList.contains('modal-backdrop')){ m.setAttribute('aria-hidden','true'); document.body.style.overflow=''; } }); });

    // live hint
    const createPwd = document.getElementById('create_password'); const createPwHint = document.getElementById('create-pw-hint'); if(createPwd && createPwHint){ createPwd.addEventListener('input', function(){ const s = passwordStrength(createPwd.value); createPwHint.textContent = `Password strength: ${s.label}`; createPwHint.style.color = s.label==='Strong'? '#7CFC00' : (s.label==='Medium'? '#FFD700' : 'var(--muted)'); }); }

    // login handler
    const loginForm = document.getElementById('login-form'); if(loginForm){ loginForm.addEventListener('submit', async function(e){ e.preventDefault(); const email=document.getElementById('login_email').value.trim().toLowerCase(); const password=document.getElementById('login_password').value; if(!email||!password) return alert('Please fill email and password'); if(!validateEmail(email)) return alert('Please enter a valid email'); const pwdHash = await sha256hex(password); const users = getUsers(); const user = users.find(u=>u.email===email); if(!user) return alert('No account found for this email'); if(user.password !== pwdHash){ if(user.password === password){ user.password = pwdHash; user.loginCount = (user.loginCount||0)+1; } else { return alert('Incorrect password for this email'); } } else { user.loginCount = (user.loginCount||0)+1; } saveUsers(users); setSession(user.id); closeAuth(); location.reload(); }); }

    // open create link
    const openCreateLink = document.getElementById('open-create'); if(openCreateLink){ openCreateLink.addEventListener('click', function(e){ e.preventDefault(); closeAuth(); openCreate(); }); }

    // create handler
    const createForm = document.getElementById('create-form'); if(createForm){ createForm.addEventListener('submit', async function(e){ e.preventDefault(); const name = document.getElementById('create_name').value.trim(); const email = document.getElementById('create_email').value.trim().toLowerCase(); const password = document.getElementById('create_password').value; if(!name||!email||!password) return alert('Please fill name, email and password'); if(!validateEmail(email)) return alert('Please enter a valid email address'); const pwCheck = passwordStrength(password); if(pwCheck.score < 1) return alert('Password is too weak. Use at least 8 characters.'); const users = getUsers(); const exists = users.find(u=>u.email===email); if(exists) return alert('already acoount is created by this email'); const pwdHash = await sha256hex(password); const user = { id: Date.now().toString(), name, email, password: pwdHash, loginCount:1, purchases:0 }; users.push(user); saveUsers(users); setSession(user.id); closeCreate(); location.reload(); }); }

    // update header anchors on this page to show profile when logged-in
    function updateHeaderLocal(){ const sess = getSession(); const anchors = Array.from(document.querySelectorAll('.header-auth-opener')); anchors.forEach(a=>{ if(sess){ const users = getUsers(); const user = users.find(u=>u.id===sess); if(user){ a.innerHTML = `<span style="display:inline-flex;align-items:center;gap:8px"><span style=\"width:28px;height:28px;border-radius:999px;background:linear-gradient(90deg,#0b78ff,#00a6ff);display:inline-flex;align-items:center;justify-content:center;color:#02141a;font-weight:800\">${user.name.charAt(0).toUpperCase()}</span>${user.name}</span>`; a.href='profile.html'; } else { a.innerHTML = 'Login/Sign up <span class="cta-arrow">â†’</span>'; a.href='#'; } } else { a.innerHTML = 'Login/Sign up <span class="cta-arrow">â†’</span>'; a.href='#'; } }); }
    updateHeaderLocal();
    window.addEventListener('storage', updateHeaderLocal);

  })();
  </script>
  <script>
    // dynamic product rendering from localStorage
    (function(){
      const KEY = 'rva_items';
      const CART = 'rva_cart';
      function getItems(){ try{return JSON.parse(localStorage.getItem(KEY)||'[]')}catch(e){return[]} }
      function getCart(){ try{return JSON.parse(localStorage.getItem(CART)||'[]')}catch(e){return[]} }
      function saveCart(c){ localStorage.setItem(CART, JSON.stringify(c)); window.dispatchEvent(new Event('storage')); }
      function cardHTML(item){
        let priceHtml = `<div style="margin-left:6px;color:var(--muted);font-weight:700">â‚¹${item.price}</div>`;
        if(item.originalPrice && parseFloat(item.originalPrice) > 0){
          const discount = item.discountPercent ? `${item.discountPercent}% OFF` : '';
          priceHtml = `
            <div style="margin-left:6px;display:flex;flex-direction:column;gap:4px">
              <div style="display:flex;align-items:center;gap:8px">
                <span style="color:#fff;font-weight:900;font-size:16px">â‚¹${item.price}</span>
                ${discount ? `<span style="background:linear-gradient(90deg,#ff4444,#ff6666);color:#fff;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:700">${discount}</span>` : ''}
              </div>
              <span style="color:var(--muted);text-decoration:line-through;font-size:12px">â‚¹${item.originalPrice}</span>
            </div>
          `;
        }
        return `\n<article class="course-card" data-id="${item.id}">\n  <div class="thumb">${item.link ? `<a href="${item.link}" target="_blank" rel="noopener">` : ''}<img src="${item.image}" alt="${item.title}">${item.link ? '</a>' : ''}</div>\n  <div class="card-body">\n    <h3>${item.title}</h3>\n    <p>${item.description||''}</p>\n    <div style=\"display:flex;gap:8px;align-items:center;margin-top:10px;flex-wrap:wrap\">\n      <button class=\"primary-btn buy-now-btn\" data-id=\"${item.id}\" style=\"border:none;cursor:pointer\">Buy Now</button>\n      <button class=\"ghost-btn add-cart\" data-id=\"${item.id}\">Add to Cart</button>\n      ${priceHtml}\n    </div>\n  </div>\n</article>`;
      }
      function checkLogin(){
        try{
          const session = JSON.parse(localStorage.getItem('rva_session')||'null');
          return !!session;
        }catch(e){
          return false;
        }
      }
      
      function requireLogin(action){
        if(!checkLogin()){
          alert('Please login first to ' + action);
          // Open login modal
          const authModal = document.getElementById('auth-modal');
          if(authModal){
            authModal.setAttribute('aria-hidden','false');
            document.body.style.overflow='hidden';
            const emailInput = authModal.querySelector('#login_email');
            if(emailInput) emailInput.focus();
          }
          return false;
        }
        return true;
      }
      
      function addToCart(id){
        if(!requireLogin('add items to cart')) return;
        const items = getItems(); const it = items.find(x=>x.id===id); if(!it) return showToast('Item not found');
        const cart = getCart(); const session = JSON.parse(localStorage.getItem('rva_session')||'null');
        const existing = cart.find(c=>c.id===id && c.userId===session);
        if(existing) existing.qty = (existing.qty||1)+1; else cart.push({ id: it.id, title: it.title, price: it.price, qty: 1, image: it.image, userId: session });
        saveCart(cart); showToast('Added to cart');
      }
      
      function handleBuyNow(e){
        const card = e.target.closest('article[data-id]');
        const id = (e.target.dataset && e.target.dataset.id) || (card && card.getAttribute('data-id'));
        if(!id) return;
        window.location.href = `product-details.html?id=${id}`;
      }
      function showToast(msg){
        let t = document.getElementById('site-toast');
        if(!t){ t = document.createElement('div'); t.id='site-toast'; t.style.position='fixed'; t.style.right='18px'; t.style.bottom='18px'; t.style.background='rgba(3,26,40,0.9)'; t.style.color='#fff'; t.style.padding='10px 14px'; t.style.borderRadius='8px'; t.style.boxShadow='0 8px 28px rgba(0,0,0,0.6)'; document.body.appendChild(t); }
        t.textContent = msg; t.style.opacity = '1'; setTimeout(()=>{ t.style.transition='opacity .6s'; t.style.opacity='0'; },1200);
      }
      function normCategory(val){
        const s = (val||'').toString().trim().toLowerCase();
        if(s.startsWith('xml')) return 'xml';
        if(s === 'xml & presets' || s === 'xmls & presets') return 'xml';
        if(s.startsWith('course')) return 'courses';
        if(s.startsWith('bundle')) return 'bundles';
        return s;
      }
      function render(){
        const items = getItems();
        const all = document.getElementById('shop-all');
        const xml = document.getElementById('shop-xml');
        const courses = document.getElementById('shop-courses');
        const bundles = document.getElementById('shop-bundles');
        if(!all||!xml||!courses||!bundles) return;
        all.innerHTML = items.map(i=>`<div style="min-width:240px">${cardHTML(i)}</div>`).join('') || '<p style="color:var(--muted)">No products yet.</p>';
        xml.innerHTML = items.filter(i=>normCategory(i.category)==='xml').map(cardHTML).join('')|| '<p style="color:var(--muted)">No XML & Presets yet.</p>';
        courses.innerHTML = items.filter(i=>normCategory(i.category)==='courses').map(cardHTML).join('')|| '<p style="color:var(--muted)">No Courses yet.</p>';
        bundles.innerHTML = items.filter(i=>normCategory(i.category)==='bundles').map(cardHTML).join('')|| '<p style="color:var(--muted)">No Bundles yet.</p>';
      }
      document.addEventListener('DOMContentLoaded', function(){ render();
        // Delegate add-to-cart clicks
        const handleCartClick = function(e){ const btn = e.target.closest('.add-cart'); if(!btn) return; e.preventDefault(); addToCart(btn.dataset.id); };
        document.getElementById('shop-all').addEventListener('click', handleCartClick);
        document.getElementById('shop-xml').addEventListener('click', handleCartClick);
        document.getElementById('shop-courses').addEventListener('click', handleCartClick);
        document.getElementById('shop-bundles').addEventListener('click', handleCartClick);
        
        // Delegate buy-now clicks
        const handleBuyNowClick = function(e){ 
          const btn = e.target.closest('.buy-now-btn'); 
          if(!btn) return; 
          e.preventDefault(); 
          handleBuyNow(e); 
        };
        document.getElementById('shop-all').addEventListener('click', handleBuyNowClick);
        document.getElementById('shop-xml').addEventListener('click', handleBuyNowClick);
        document.getElementById('shop-courses').addEventListener('click', handleBuyNowClick);
        document.getElementById('shop-bundles').addEventListener('click', handleBuyNowClick);
        (async function(){
          try{
            const DB_URL = 'https://rebelvids-academy-default-rtdb.firebaseio.com';
            const res = await fetch(`${DB_URL}/products.json`);
            if(!res.ok) return;
            const data = await res.json();
            if(data && typeof data === 'object'){
              const fetched = Object.keys(data).map(k=>({ id:k, ...data[k] }));
              // Overwrite local items with server state to ensure deletions are reflected
              localStorage.setItem(KEY, JSON.stringify(fetched));
              render();
            }
          }catch(e){}
        })();
      });
      window.addEventListener('storage', render);
    })();
  </script>
</body>
</html>
